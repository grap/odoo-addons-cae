==========
CAE - Base
==========

.. 
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! source digest: sha256:60bcec9226d3a7187c2248534b96c53e92e0f1999b3915edd9b50bc1a023af39
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

.. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
    :target: https://odoo-community.org/page/development-status
    :alt: Beta
.. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
    :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
    :alt: License: AGPL-3
.. |badge3| image:: https://img.shields.io/badge/github-grap%2Fodoo--addons--cae-lightgray.png?logo=github
    :target: https://github.com/grap/odoo-addons-cae/tree/16.0/fiscal_company_base
    :alt: grap/odoo-addons-cae

|badge1| |badge2| |badge3|

This module extend Odoo functionnalities, regarding companies features to
manage CAE (Coopearatives of Activities and Employment) that is a special
status for french companies.

(see above, links that describes what is CAE).

Basically, in a CAE, there is a 'parent' company that hosts many 'child'
companies. People in a child company should have access only to their activity.
(account moves, customers, suppliers, products, etc...)

In a fiscal and legal point of view, there is only one company (the parent one)
so there is only on chart of accounts. Accounting moves of the child
companies are written in the child company, but associated to the account of
the parent company.

**Companies feature**

* Add a new field on company `fiscal_type`:
    * `group` : Container company: can only contains 'Normal'
      or 'CAE' Companies.
    * `normal` : Classical company, (by default)
    * `fiscal_mother`: CAE company, that can host many child companies
    * `fiscal_child`: child company, hosted by the CAE

.. figure:: https://raw.githubusercontent.com/grap/odoo-addons-cae/16.0/fiscal_company_base/static/description/res_company_form.png

**More information about CAE [FR]**

* https://fr.wikipedia.org/wiki/Coopérative_d'activités_et_d'emploi
* http://www.cooperer.coop/
* http://www.copea.fr/

**Table of contents**

.. contents::
   :local:

Development
===========

This module introduces 2 mixin:

``fiscal.company.change.search.domain.mixin``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

the model that inherits this abstract will change the domain
in the search feature. If a domain contains ('company_id', '=', X)
it will be changed into ('company_id', 'in', [X, A, B])
if X is a CAE and A and B are the integrated related companies.

**Usage**

.. code-block:: python

  class MyModel(models.Model):
      _name = "my.model"
      _inherit = ["fiscal.company.change.search.domain.mixin"]

``fiscal.company.check.company.mixin``
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The model that inherits this abstract will prevent to
create items with companies, depending on the
fiscal_type of the company.

**Usage**

.. code-block:: python

  class MyModel(models.Model):
      _name = "my.model"
      _inherit = ["fiscal.company.check.company.mixin"]

      _fiscal_company_forbid_fiscal_type = ["fiscal_mother"]

Bug Tracker
===========

Bugs are tracked on `GitHub Issues <https://github.com/grap/odoo-addons-cae/issues>`_.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us to smash it by providing a detailed and welcomed
`feedback <https://github.com/grap/odoo-addons-cae/issues/new?body=module:%20fiscal_company_base%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.

Do not contact contributors directly about support or help with technical issues.

Credits
=======

Authors
~~~~~~~

* GRAP

Contributors
~~~~~~~~~~~~

* Julien WESTE
* Sylvain LE GAL <https://twitter.com/legalsylvain>

Maintainers
~~~~~~~~~~~

This module is part of the `grap/odoo-addons-cae <https://github.com/grap/odoo-addons-cae/tree/16.0/fiscal_company_base>`_ project on GitHub.

You are welcome to contribute.
